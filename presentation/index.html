<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>ES6 - React</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		
		<!-- Font awesome -->
		<link rel="stylesheet" href="css/font-awesome/css/font-awesome.css">
		<link rel="stylesheet" href="css/custom.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Ecma 6</h1>
					<h3>New features in JS</h3>
					<p>
						<small>Created by <a href="#">Sławomir Król</a></small>
					</p>
				</section>

				<section>
					<ol>
						<li>Babel js https://babeljs.io/</li>
						<li>Arrow functions</li>
						<li>Default parameters</li>
						<li>let && const</li>
						<li>Template literals</li>
						<li>Destructuring assignment</li>
						<li>Classes</li>
						<li>Modules</li>
					</ol>
				</section>

				<section>
					<h3>Arrow functions</h3>
					<pre><code class="hljs">
// ES5 old school
var anonymousFunction = function(data, index) {
	...
}

// one line assignment, value returned
var es6Function = data => data.prop;

// multiparams, multiline statement block
var es6Function = (data, index) => {
	...
};
					</code></pre>
				</section>

				<section>
					<h3>Default parameters</h3>
					<pre><code class="hljs">
function defaultUrlProvider() {
	return 'https://test.io';
}

function test(title = 'name', urlProvider = defaultUrlProvider) {
	...
}
					</code></pre>
				</section>

				<section>
					<h3>let && const </h3>
					<p> Let for block variables, for example in loops or inner if statements (not visible outside declared block). <br/>
						Const for not mutable variables, mostly replaces 'var'
					</p>
					<pre><code class="hljs">
const variable = 'value';
variable = 'new val' // !!! Error variable cannot be changed

function test() {
	const t = '1';
	for (let i = 1; i < 10; i++) {
		...
	}
	console.log(i) // 'i' is undefined
}
					</code></pre>
				</section>

				<section>
					<h3>Template literals using placeholders ${param}</h3>
					<pre><code class="hljs">
var first = 'John', last = 'Kowalski', id = 999;
var person = {
	first: first,
	last:last,
	id: id
}

var name = `Your name is ${first} ${last}.`
var url = `http://localhost:3000/api/messages/${id}`
var data = `Hello: ${person.first} ${person.last}`;
					</code></pre>
				</section>

				<section>
					<h3>Destructuring assignment of arrays and objects</h3>
					<pre><code class="hljs">
var list = [1, 2, 3, 4, 5];
var [first, , last] = list;
console.log(first + last); // 6

var person = {
	first: 'john', last: 'kowalski', age: 42
};
var {lastName, age} = person;
console.log(lastName); // kowalski
					</code></pre>
				</section>

				<section>
					<h3>Function arguments assignment</h3>
					<pre><code class="hljs">
function personInfo({firstName, lastName}) {
	return firstName + ' :: ' + lastName;
}

personInfo({
	firstName: 'john',
	lastName: 'kowalski',
	age: 42
});
					</code></pre>
				</section>

				<section>
					<h3>Classes</h3>
					<pre><code class="hljs" data-trim>
class TeddyBear extends Toy {
	constructor(props) {
		super(props);
	}

	get toyName() {
		return 'Teddy ' + this.name;
	}

	sayHello() {
		return this.toyName + 'says hello';
	}
}
					</code></pre>
				</section>

				<section>
					<h3>imports && exports</h3>
					<pre><code class="hljs">
export default class Toy {};
import Toy from './Toy';

export var toy1 = new Toy();
export var toy1 = new Toy();
import {toy1, toy2} from './ToysFactory';
					</code></pre>
				</section>

				<section>
					<h1>React.js</h1>
					<h3> TODO App</h3>
				</section>

				<section>
					<ol>
						<li>Create react app from react-scripts</li>
						<li>Code, run, build, test</li>
						<li>React Components</li>
						<li>Decomposing views</li>
						<li>Render</li>
					</ol>
				</section>

				<section>
					<h3>Install react scripts with sass</h3>
					<pre><code class="hljs">
npm install -g create-react-app

create-react-app test --scripts-version react-scripts-sass
					</code></pre>
				</section>

				<section>
					<h3>Stateless - Functional component</h3>
					<pre><code class="hljs">
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}
					</code></pre>
				</section>

				<section>
					<h3>Statefull - Component class</h3>
					<pre><code class="hljs" data-trim>
class Welcome extends React.Component {
	constructor(props) {
		super(props);
		this.state = {
			address: this.props.address
		};
	}
	render() {
		return (
			<h1>
				Hello, {this.props.name}
				{this.state.address}
			</h1>
		);
	}
}
					</code></pre>
				</section>

				<section>
					<h3>Initial data</h3>
					<pre><code class="hljs">
const todos = [
	{id: 0, title: 'Knockout', completed: true},
	{id: 1, title: 'React', completed: false},
	{id: 2, title: 'Angular', completed: false}
];
					</code></pre>
				</section>

				<section>
					<h3>Render app into DOM</h3>
					<pre><code class="hljs">
// index.js
import React from 'react';
import ReactDOM from 'react-dom';
import TodoApp from './components/todo/TodoApp';

ReactDOM.render(<TodoApp /></TodoApp>,
	document.getElementById('root'));
					</code></pre>
				</section>

				<section>
					<h3>Install react scripts with sass</h3>
					<img src="images/todo-mvc.png" />
				</section>

				<section>
					<img src="images/mockup.png" />
				</section>

				<section>
					<a href="http://codepen.io/shawnyan/pen/ONOaRx">Complete codepen.io example</a>
				</section>
				
				<section>
					<h3>Dictionary</h3>
					<ol>
						<li>Element - describe what you want see on screen - <mark>const element = &lt;h3&gt;title&lt;/h3&gt;</mark></li>
						<li>Component - built from elements <br/><mark>class Color extends React.Component {}</mark></li>
						<li>Root DOM Node - single DOM node managed by ReactDOM, but app can have multiple isolated root DOM nodes</li>
						<li>Props and State</li>
					</ol>
				</section>
				
				<section>
					<h3>JSX</h3>
					<ul>
						<li>transform html-like code into JS (React.createElement)</li>
						<li>allows embedding JS expressions using {variable/function} syntax</li>
						<li>syntax for expressing Virtual DOM</li>
						<li>separates of concerns, for presentation purposes</li>
						<li>use babel for transforming into plain JS</li>
						<li>clear syntax, all elements must be properly closed, nested tags must be correctly placed. For example placing div inside span is not allowed</li>
					</ul>
				</section>
				
				<section>
					<h3>JSX gotchas - html entities </h3>
					<pre><code class="hljs" data-trim>
&lt;div&gt;First &middot; Second&lt;/div&gt;

&lt;div&gt;{'First \u00b7 Second'}&lt;/div&gt;
&lt;div&gt;{'First ' + String.fromCharCode(183) + ' Second'}&lt;/div&gt;
					</code></pre>
				</section>
				
				<section>
					<h3>JSX gotchas - custom element's attributes</h3>
					<pre><code class="hljs" data-trim>
// must be prefixed with data-
&lt;div data-custom-attribute="foo" /&gt;

// all aria- are properly interpreted
&lt;div aria-hidden={true} /&gt;
					</code></pre>
				</section>
				
				<section>
					<h3>JSX gotchas - render method can return only single node</h3>
					<pre><code class="hljs" data-trim>
// will not work
render() {
	return (
		&lt;div&gt; first &lt;/div&gt;
		&lt;div&gt; second &lt;/div&gt;
	);
}

render() {
	return (
		&lt;div&gt; ... children &lt;/div&gt;
	);
}
					</code></pre>
				</section>
				
				<section>
					<ul>
						<li>Presentational Components using Stateless functional Component</li>
						<li>Container Components using Statefull React.Component class</li>
						<li>Props are read-only</li>
						<li>Statefull data should be immutable</li>
					</ul>
				</section>
				
				<section>
					<h3>Lifecycle</h3>
					<ol>
						<li>Mount</li>
						<li>Update</li>
						<li>Unmount</li>
					</ol>
				</section>
				
				<section>
					<h3>Mounting</h3>
					<ul>
						<li>contructor(props) - setup initial state data</li>
						<li>componentWillMount() - just before render (mostly used in server side rendering)</li>
						<li>render() - renders component body using JSX</li>
						<li>componentDidMount() - immediately after render(), may load data from remote endpoint, manipulate DOM </li>
					</ul>
				</section>
				
				<section>
					<h3>Updating</h3>
					<ul>
						<li>componentWillReceiveProps(nextProps) - bofore mounted component receives props, </li>
						<li>shouldComponentUpdate() - to let React know if a component's output is not affected by the current change in state or props. By default rerenders on every state change.</li>
						<li>componentWillUpdate() - is invoked immediately before rendering when new props or state are being received.</li>
						<li>render()</li>
						<li>componentDidUpdate() - similar to componentDidMount, but is invoked after updating state</li>
					</ul>
				</section>
				
				<section>
					<h3>Unmounting</h3>
					<ul>
						<li>componentWillUnmount() - any neccessary cleanup, such as invalidating timers, cancelling network requests, or cleaning DOM elements</li>
					</ul>
				</section>
				
				<section>
					<h3>Default Properties</h3>
					<pre><code class="hljs" data-trim>
class Picker extends React.Component {
	....
}

// for any undefined props
Picker.defaultProps = {
	color: 'red',
	
};

&lt;Picker/&gt; // props.color will be set to 'red'
&lt;Picker color={null}&gt; // props.color is still null
					</code></pre>
				</section>
				
				<section>
					<h3>Children props</h3>
					<pre><code class="hljs xml" data-trim>
function FancyDialog() {
  return (&lt;div className='fancy-dialog'&gt; {props.children} &lt;/div&gt;);
}
function DialogTitle() {
  return &lt;div className="title"&gt; Title &lt;div&gt;
}
function DialogContent() {
  return &lt;div className="content"&gt; Content &lt;div&gt;
}
&lt;FancyDialog&gt;
  &lt;DialogTitle/&gt;
  &lt;DialogContent/&gt;
&lt;/FancyDialog&gt;
					</code></pre>
				</section>
				
				<section>
					<h3>Quick demos</h3>
					<ul>
						<li>https://jsfiddle.net/</li>
						<li>https://codepen.io/pen/</li>
					</ul>
				</section>
				
				<section>
					<h3>Sample JsFiddle config</h3>
					<pre><code class="hljs" data-trim>
// include react + reactDOM in scripts
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.5.4/react.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.5.4/react-dom.js"></script>
// in HTML place root container for APP
&lt;div id="root"&gt;&lt;/div&gt;

// create some sample Component
class App extends React.Component {
...
}

// render it to DOM element
ReactDOM.render(&lt;App/&gt;, document.querySelector("#root"));
					</code></pre>
				</section>
				
				<section>
					<h3>TODO - React Clock - lifecycle</h3>
					<iframe width="100%" height="300" src="http://jsfiddle.net/skrol/j1n4krLa/3/embedded/result,js,html,css" frameborder="0"></iframe>
				</section>
				
				<section>
					<h3>Events handling</h3>
					<pre><code class="hljs xml">
&lt;button onClick={activateLasers}&gt;
	Activate lasers
&lt;/button&gt;

&lt;button onClick={() => this.activateLasers()}&gt;
	Activate lasers
&lt;/button&gt;
					</code></pre>
				</section>
				
				<section>
					<h3>TODO - React Color Picker</h3>
					<iframe width="100%" height="300" src="http://jsfiddle.net/skrol/Lr2uq09q/embedded/result,js,html,css" frameborder="0"></iframe>
				</section>
				
				<section>
					<h3>Conditional rendering</h3>
					<h5>Option 1. Assign variable that would render elements</h5>
					<pre><span class="bad-choice"><ico class="fa fa-times"/></span>
						<code class="hljs" data-trim>
render() {
	let message, status = this.props.status;
	if (status === 'OPENED') {
		message = &lt;span&gt;opened&lt;span&gt;
	} else if (status === 'CLOSED') {
		message = &lt;img src="closed.png" /&gt;
	}
	
	return (
		&lt;div&gt;{message}&lt;div&gt;
	);
}
						</code>
					</pre>
				</section>
				
				<section>
					<h5>Option 2. Separate the conditional in a different function that handles option</h5>
					<pre><span class="good-choice"><ico class="fa fa-thumbs-up"/></span>
						<code class="hljs" data-trim>
renderOpenStatus() {
	return &lt;span&gt;opened&lt;span&gt;
}
renderClosedStatus() {
	return &lt;img src="closed.png" /&gt;
}
renderStatus(status) {
	switch(status) {
		case 'OPENED': return this.renderOpenStatus();
		case 'CLOSED': return this.renderClosedStatus();
		default: return null;
	}
}
render() {
	const {status} = this.props;
	return (
		&lt;div&gt;{this.renderStatus(status)}&lt;div&gt;
	);
}
						</code>
					</pre>
				</section>
				
				<section>
					<h5>Option 3. Inline ternary operator - only for small blocks</h5>
					<pre><span class="good-choice"><ico class="fa fa-thumbs-up"/></span>
						<code class="hljs" data-trim>
render() {
  return (
    &lt;div&gt;
      {this.props.isLogged ? 'You're logged in : 'Please log in'}
    &lt;/div&gt;
  );
}
						</code>
					</pre>
				</section>
				
				<section>
					<h3>Container Component</h3>
					<ul>
						<li>Holds state</li>
						<li>Manages loading remote data</li>
						<li>Simplifies reusability</li>
						<li>Seperates Presentation logic from Data and Business logic</li>
					</ul>				
				</section>
				
				<section>
					<pre><code class="hljs" data-trim>
class UserListContainer extends React.Component {
	constructor(props) {
		super(props);
		this.state = {
			users: []
		}
	}
	
	componentDidMount() {
		fetch('/api/users').then(response => {
			return response.json();
		}).then(users => {
			this.updateUsers(users);
		})
	}
	
	updateUsers(users) {
		this.setState({users: users})
	} 
}
					</code></pre>
					
					<pre><code class="hljs" data-trim>
const UserList = (props) => {
	return props.users.map(user => {
		return &lt;User key={user.id} {...user}/&gt;
	})
}

const User = (props) => {
	return &lt;div&gt;Name: {props.name}, age {props.age}&lt;/div&gt;
};					
					</code></pre>
				</section>
				
				<section>
					<h3>Mock data on server - express</h3>
					<pre><code class="hljs" data-trim>
// npm install --save-dev express
const express = require('express')
const app = express()
const port = 3001;
const users = require('./users');

app.get('/api/users', (request, response) => {
  response.send(users);
})

app.listen(port, (err) => {
  if (err) return console.log('something bad happened', err);
  console.log(`server is listening on ${port}`)
})
					</code></pre>
				</section>
				
				<section>
					<h3>Routing</h3>
					<p>URL drives application state</p>
					<ul>
						<li>HashRouter - http://example.io#users/999/contacts</li>
						<li>BrowserRouter - http://example.io/users/999/contacts</li>
					</ul>
				</section>
				
				<section>
					<h3>React Router example</h3>
					<iframe width="100%" height="300" src="http://jsfiddle.net/skrol/7nmmh9Lg/2/embedded/result,js,html,css" frameborder="0"></iframe>
				</section>
				
				<section>
					<h3>TDD in practice</h3>
					<h5>Warmup</h5>
					
					<p>Conversion between Celsius &lt;-&gt; Fahranheit degrees</p> 
					<a href="http://tddbin.com/">http://tddbin.com/</a>
				</section>
	
				<section>
					<pre><code class="hljs" data-trim>
describe('Celsius -&gt; Fahranheit', () =&gt; {
	it('Boiling water', () =&gt; {
		assert.equal(212, convert(100, toFahranheit));
	});
	
	it('Ice freezing', () =&gt; {
		assert.equal(32, convert(0, toFahranheit));
	});
}
					</code></pre>
				</section>
	
				<section>
					<pre><code class="hljs">
const convert = (temperature, convertFunc) => {
	return converted;
}

const toCelsius = (fahranheit) => {
	return ...;
};

const toFahranheit = (celsius) => {
	return ...;
};
					</code></pre>
				</section>
				
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
